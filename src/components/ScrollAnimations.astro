---
// Script para activar animaciones cuando elementos entran en el viewport
---

<script>
    // Intersection Observer para animaciones de scroll
    const observerOptions = {
        threshold: 0.1, // Activar cuando el 10% del elemento es visible
        rootMargin: '0px 0px -50px 0px' // Offset para activar un poco antes
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Agregar clase 'visible' cuando el elemento entra en viewport
                entry.target.classList.add('visible');

                // Opcional: dejar de observar después de la primera animación
                // observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Función para inicializar observadores
    const initScrollAnimations = () => {
        // Seleccionar todos los elementos con clases de animación
        const animatedElements = document.querySelectorAll('.fade-in-up, .fade-in, .scale-in');

        animatedElements.forEach(el => {
            observer.observe(el);
        });
    };

    // Inicializar cuando el DOM esté listo
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initScrollAnimations);
    } else {
        initScrollAnimations();
    }

    // Para Astro View Transitions (si se agregan en el futuro)
    document.addEventListener('astro:page-load', initScrollAnimations);
</script>
